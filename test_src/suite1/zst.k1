ns zst_test;

let g: {} = {};
let* g2: *{} = {};

fn testGlobal(): empty {
  assertEquals(0, types/sizeOf[typeOf(g)]);
  g2;
  assertEquals(g, g2.*);
}

fn testLocal(_a: empty, _b: empty, _c: empty, _d: empty): empty {
  let l = {}; 
  assertEquals(types/sizeOf[typeOf(l)], 0);
  l
}

fn test() {
  g; // empty
  g2; // null ptr
  g2.*; // no-op yielding Value::Empty

  testLocal({}, {}, {}, {});
  staticZst();
}

fn staticZst() {
  let point = #static { x: 1, y: (#static 2): int };
  assertEquals(point.x.fromStatic(), 1);
}

//fn staticGetX[P: static { x: int, y: int }](p: P): int {
//  p.x.fromStatic()
//}
