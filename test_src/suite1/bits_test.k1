ns bits_test;

fn test() {

  // NOT
  assert(100.bitNot() == -101);
  assert(Bitwise/bitNot(0) == -1);
  // 2^63-1 == 9223372036854775807
  // 2^63 == 9223372036854775808
  assert(9223372036854775807.bitNot() == -9223372036854775808);

  assertEquals(Bitwise/bitNot(-24555: i32), 24554);

  // AND
  assert(100 & 100 == 100);
  assert(100 & 0 == 0);
  assert(42 & 15 == 10);
  assert(-1i8 & 127i8 == 127i8);
  assert(29 & 15 == 13);

  // OR
  assert(100 | 0 == 100);
  assert(42 | 15 == 47);
  assertEquals(-1i64 | 0i64, -1);
  assertEquals(-1i16 | 0i16, -1i16);
  assert(29 | 15 == 31);

  // XOR
  assert(100 ^ 0 == 100);
  assert(42 ^ 15 == 37);
  assert(-1i32 ^ -1i32 == 0i32);
  assert(29 ^ 15 == 18);
  assert(255u8 ^ 170u8 == 85u8);

  // Shift Left
  assert(1 << 1 == 2);
  assert(1 << 2 == 4);
  assert(1 << 3 == 8);
  assert(3 << 7 == 384);

  // Shift Right
  assert(42 >> 1 == 21);
  assert(-16 >> 2 == -4);
  assert(0 >> 5 == 0);
  assert(1000000000 >> 10 == 976562);
  assert(-7 >> 1 == -4);
}
