ns all_out_of_order;

impl SayHello for Foo {
  fn hello(self: Foo): MyString { 
    { s: self.name  }
  }
}

fn takesHelloer[T](t: T): MyString where T: SayHello {
  t.hello()
}

ability SayHello {
  fn hello(self: Self): MyString {
    { s: "Hello" }
  }
}


fn test(): unit {
  let foo: Foo = { name: "Joe" };
  foo.hello();
  assert(takesHelloer(foo).s == "Joe");
}

deftype MyString = { s: string }

deftype Foo = { name: string }

ns bar {
  // Type with NS used before defined
  use foo/core/Test
  fn doIt(t: Test): Test { 
    // before called
    before();
    Test/default
  }
  // before imported (below where called)
  use secret/before
}

ns secret {
  // before defined (below where imported and called)
  fn before(): unit { () }
}

ns foo {
  ns core {
    deftype Test = either A, B
    ns Test {
      let default: Test = .A;
    }
  }
}

