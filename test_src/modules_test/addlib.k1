let MODULE_INFO: core/k1/ModuleManifest = {
  kind: .Executable,
  deps: [],
  multithreading: false,
  libs: ["mul"]
};

extern("mul", "myMul") fn myMul(x: int, y: int): int
extern("mul", "make") fn make(x: u8, y: u8): { x: u8, y: u8 }
extern("mul", "origin") fn origin(): { x: u8, y: u8 }

let staticMul: 1024 = myMul(32,32);

let staticOrigin: { x: u8, y: u8 } = origin();

fn main(): i32 {
  let i = myMul(4, 3);
  assertEquals(myMul(4,3), 4*3);
  assertEquals(staticMul.fromStatic(), 32*32);

  assertEquals(staticOrigin.x, 0);
  assertEquals(staticOrigin.y, 0);
  let makeStatic = #static make(1, 255);
  assertEquals(makeStatic.x, 1);
  assertEquals(makeStatic.y, 255);


  let origin = origin();
  println("rt origin is ({origin.x},{origin.y})");

  let makeRt = make(1, 255);
  // Fix when runtime struct ABI is fixed
  // assertEquals(makeRt.x, 1);
  // assertEquals(makeRt.y, 255);
  0
}
